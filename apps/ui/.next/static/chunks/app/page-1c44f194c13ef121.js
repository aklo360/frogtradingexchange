(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1458:(e,t,a)=>{"use strict";a.d(t,{SwapCard:()=>_});var s=a(2785),r=a(2035),n=a(6453),i=a(7530),l=a(4955),o=a(3337),c=a(5720);let d=(e=>{if(!e)return"";let t=e.trim();return t?t.endsWith("/")?t.slice(0,-1):t:""})("https://frogx-api.aklo.workers.dev");var u=a(5541),m=a.n(u);let h=[{label:"SOL",mint:"So11111111111111111111111111111111111111112",decimals:9},{label:"USDC",mint:"EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v",decimals:6},{label:"FROG",mint:"Fr0g1111111111111111111111111111111111111111",decimals:6}],p=e=>"".concat(e.slice(0,4),"…").concat(e.slice(e.length-4)),w=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6;return Number.isFinite(e)?new Intl.NumberFormat("en-US",{minimumFractionDigits:0,maximumFractionDigits:t}).format(e):"—"},_=()=>{var e,t;let[a,u]=(0,n.useState)(h[0]),[_,x]=(0,n.useState)(h[1]),[g,b]=(0,n.useState)("0"),[y,j]=(0,n.useState)(null),[S,k]=(0,n.useState)(!1),[f,N]=(0,n.useState)(!1),[v,C]=(0,n.useState)(null),[B,F]=(0,n.useState)(null),{connection:I}=(0,i.w)(),{connected:A,publicKey:L,disconnect:E,disconnecting:H,sendTransaction:G}=(0,l.v)(),{setVisible:O}=(0,o.o)(),T=!!(A&&L),U=null==L?void 0:L.toBase58(),M=Number(g),P=Number.isFinite(M)?M:0,q=P>0?((e,t)=>{if(!Number.isFinite(e)||e<=0)throw Error("Amount must be positive");return BigInt(Math.round(e*10**t)).toString()})(P,a.decimals):"0",R=(e=>{let[t,a]=(0,n.useState)({status:"idle"}),{inMint:s,outMint:r,amountIn:i,slippageBps:l,priorityFee:o,userPublicKey:c,enabled:u=!0}=e;return(0,n.useEffect)(()=>{let e=new AbortController;return u&&"0"!==i&&c?(async()=>{var t,n,u;a({status:"loading"});try{let u=await fetch((e=>d?"".concat(d).concat(e.startsWith("/")?e:"/".concat(e)):e)("/api/frogx/quotes"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({inMint:s,outMint:r,amountIn:i,slippageBps:l,priorityFee:o,userPublicKey:c}),signal:e.signal});if(!u.ok)throw Error("Failed with status ".concat(u.status));let m=await u.json(),h=m.routers.map(e=>{var t,a;return"string"==typeof e?e:null!=(a=null!=(t=e.name)?t:e.id)?a:"unknown-router"});a({status:"success",data:{amountOut:m.amountOut,priceImpactBps:m.priceImpactBps,routers:h,executable:m.executable,updatedAt:m.updatedAt,provider:m.provider,routeId:m.routeId,transactionBase64:m.transactionBase64,inAmount:m.inAmount,instructions:null!=(t=m.instructions)?t:[],addressLookupTables:null!=(n=m.addressLookupTables)?n:[],computeUnits:m.computeUnits,computeUnitsSafe:m.computeUnitsSafe}})}catch(e){if("AbortError"===e.name)return;a({status:"error",error:null!=(u=e.message)?u:"Unknown error"})}})():a({status:"idle"}),()=>e.abort()},[i,u,s,r,o,l,c]),t})({inMint:a.mint,outMint:_.mint,amountIn:q,slippageBps:50,priorityFee:0,userPublicKey:U,enabled:T}),V="success"===R.status?R.data:null;(0,n.useEffect)(()=>{let e=!1;return T&&L?((async()=>{try{k(!0);let t=await I.getBalance(L,{commitment:"processed"});e||j(t)}catch(t){e||j(0),console.error("Failed to load SOL balance",t)}finally{e||k(!1)}})(),()=>{e=!0}):void j(null)},[I,L,T]);let D=(0,n.useMemo)(()=>{if(!V)return 0;let e=Number(V.amountOut),t=10**_.decimals;return Number.isFinite(e)?e/t:0},[V,_.decimals]),W=.995*D,K=P>0?D/P:0,J=V?V.routers.join(" → "):"error"===R.status?"Failed to load":"Streaming…",z=V?"".concat((V.priceImpactBps/100).toFixed(2),"%"):"—",Q=(()=>{if(!T)return"Connect a wallet to start streaming quotes.";if("loading"===R.status)return"Refreshing quote…";if("error"===R.status){var e;let t=null!=(e=R.error)?e:"Unknown";return"Error: ".concat(t)}return V?V.executable?"Executable as of ".concat(new Date(V.updatedAt).toLocaleTimeString()):"Quote stale":"Awaiting input"})(),Y=T&&D>0?w(D,6):"0.000000",$=T&&W>0?"".concat(w(W,6)," ").concat(_.label):"—",X=T&&K>0?"".concat(w(K,6)," ").concat(_.label):"—",Z=e=>new c.fH({programId:new c.J3(e.programId),keys:e.accounts.map(e=>({pubkey:new c.J3(e.pubkey),isSigner:e.isSigner,isWritable:e.isWritable})),data:r.Buffer.from(e.data,"base64")}),ee=async e=>e.length?(await Promise.all(e.map(async e=>{var t;return null!=(t=(await I.getAddressLookupTable(new c.J3(e))).value)?t:null}))).filter(e=>!!e):[],et=async()=>{var e,t,a,s;if(!(null==V||null==(e=V.instructions)?void 0:e.length)||!L)throw Error("Quote missing route instructions");let r=null!=(a=null==(t=V.instructions)?void 0:t.map(Z))?a:[],n=await ee(null!=(s=V.addressLookupTables)?s:[]),{blockhash:i,lastValidBlockHeight:l}=await I.getLatestBlockhash("finalized"),o=new c.wu({payerKey:L,recentBlockhash:i,instructions:r}).compileToV0Message(n);return{transaction:new c.Kt(o),blockhash:i,lastValidBlockHeight:l}},ea=null!==y?y/c.Sr:0,es=T?S?"…":w(ea,4):"—",er=a.mint===h[0].mint,en=T&&er&&null!==y,ei=e=>{if(!en)return;let t=(null!=y?y:0)*e/c.Sr;b(t>0?t.toFixed(6).replace(/\.0+$|0+$/,"").replace(/\.$/,""):"0")};(0,n.useEffect)(()=>{C(null),F(null),N(!1)},[null==V?void 0:V.routeId,T]);let el=!!(T&&V&&(V.transactionBase64||(null!=(t=null==(e=V.instructions)?void 0:e.length)?t:0)>0)),eo=async()=>{if(!T)return void O(!0);if(!L||!G)return void C("Wallet does not support sending transactions");if(!el)return void C("Quote not ready for execution");try{let e;N(!0),C(null);let t=null;if(null==V?void 0:V.transactionBase64){let t=(e=>{if("function"==typeof atob){let t=atob(e),a=new Uint8Array(t.length);for(let e=0;e<t.length;e+=1)a[e]=t.charCodeAt(e);return a}let t=r.Buffer.from(e,"base64");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)})(V.transactionBase64);e=c.Kt.deserialize(t)}else{let a=await et();e=a.transaction,t={blockhash:a.blockhash,lastValidBlockHeight:a.lastValidBlockHeight}}let a=await G(e,I,{skipPreflight:!1});t?await I.confirmTransaction({signature:a,blockhash:t.blockhash,lastValidBlockHeight:t.lastValidBlockHeight},"confirmed"):await I.confirmTransaction(a,"confirmed"),F(a)}catch(t){var e;console.error("Swap failed",t),C(null!=(e=t.message)?e:"Swap failed")}finally{N(!1)}},ec=T?f?"Swapping...":el?"Swap":"loading"===R.status?"Fetching quote...":"Swap (Coming Soon)":"Connect Wallet",ed=!!T&&(!el||f);return(0,s.jsxs)("div",{className:m().swapCard,children:[(0,s.jsxs)("header",{className:m().header,children:[(0,s.jsx)("div",{children:(0,s.jsx)("span",{className:m().badge,children:"Swap"})}),(0,s.jsx)("div",{className:m().swapMeta,children:T&&(0,s.jsx)("button",{type:"button",className:m().disconnectButton,onClick:()=>void E(),disabled:H,children:"Disconnect"})})]}),(0,s.jsxs)("section",{className:m().tradeBox,children:[(0,s.jsxs)("div",{className:m().tokenRow,children:[(0,s.jsxs)("div",{className:m().rowHeader,children:[(0,s.jsx)("span",{className:m().rowLabel,children:"You Pay"}),(0,s.jsxs)("div",{className:m().balanceGroup,children:[(0,s.jsxs)("span",{className:m().balanceLabel,children:["Balance: ",er?es:"—"," ",a.label]}),en&&(0,s.jsxs)("div",{className:m().balanceShortcuts,children:[(0,s.jsx)("button",{type:"button",className:m().shortcutButton,onClick:()=>ei(.5),children:"50%"}),(0,s.jsx)("button",{type:"button",className:m().shortcutButton,onClick:()=>ei(1),children:"Max"})]})]})]}),(0,s.jsxs)("div",{className:m().tokenControls,children:[(0,s.jsxs)("div",{className:m().tokenSelectGroup,children:[(0,s.jsx)("label",{className:m().srOnly,htmlFor:"fromMint",children:"Select token to pay"}),(0,s.jsx)("select",{id:"fromMint",className:m().tokenSelect,value:a.mint,onChange:e=>{let t=h.find(t=>t.mint===e.target.value);if(t&&(u(t),t.mint===_.mint)){let e=h.find(e=>e.mint!==t.mint);e&&x(e)}},children:h.map(e=>(0,s.jsx)("option",{value:e.mint,children:e.label},e.mint))}),(0,s.jsx)("span",{className:m().mintHint,children:p(a.mint)})]}),(0,s.jsxs)("div",{className:m().amountGroup,children:[(0,s.jsx)("label",{className:m().srOnly,htmlFor:"fromAmount",children:"Amount to pay"}),(0,s.jsx)("input",{id:"fromAmount",className:m().tokenAmount,inputMode:"decimal",value:g,onChange:e=>(e=>{(""===e||/^\d*(\.\d*)?$/.test(e))&&b(e)})(e.target.value),placeholder:"0.00"})]})]})]}),(0,s.jsxs)("button",{type:"button",className:m().switchButton,onClick:()=>{u(_),x(a)},"aria-label":"Switch tokens",children:[(0,s.jsxs)("svg",{className:m().switchIcon,viewBox:"0 0 48 32",role:"img","aria-hidden":"true",focusable:"false",shapeRendering:"crispEdges",children:[(0,s.jsxs)("g",{className:m().arrowUp,children:[(0,s.jsx)("rect",{x:"8",y:"2",width:"4",height:"4"}),(0,s.jsx)("rect",{x:"4",y:"6",width:"4",height:"4"}),(0,s.jsx)("rect",{x:"8",y:"6",width:"4",height:"4"}),(0,s.jsx)("rect",{x:"12",y:"6",width:"4",height:"4"}),(0,s.jsx)("rect",{x:"0",y:"10",width:"4",height:"4"}),(0,s.jsx)("rect",{x:"4",y:"10",width:"4",height:"4"}),(0,s.jsx)("rect",{x:"8",y:"10",width:"4",height:"4"}),(0,s.jsx)("rect",{x:"12",y:"10",width:"4",height:"4"}),(0,s.jsx)("rect",{x:"16",y:"10",width:"4",height:"4"}),(0,s.jsx)("rect",{x:"8",y:"14",width:"4",height:"4"}),(0,s.jsx)("rect",{x:"8",y:"18",width:"4",height:"4"})]}),(0,s.jsxs)("g",{className:m().arrowDown,transform:"translate(24 0)",children:[(0,s.jsx)("rect",{x:"8",y:"26",width:"4",height:"4"}),(0,s.jsx)("rect",{x:"4",y:"22",width:"4",height:"4"}),(0,s.jsx)("rect",{x:"8",y:"22",width:"4",height:"4"}),(0,s.jsx)("rect",{x:"12",y:"22",width:"4",height:"4"}),(0,s.jsx)("rect",{x:"0",y:"18",width:"4",height:"4"}),(0,s.jsx)("rect",{x:"4",y:"18",width:"4",height:"4"}),(0,s.jsx)("rect",{x:"8",y:"18",width:"4",height:"4"}),(0,s.jsx)("rect",{x:"12",y:"18",width:"4",height:"4"}),(0,s.jsx)("rect",{x:"16",y:"18",width:"4",height:"4"}),(0,s.jsx)("rect",{x:"8",y:"14",width:"4",height:"4"}),(0,s.jsx)("rect",{x:"8",y:"10",width:"4",height:"4"})]})]}),(0,s.jsx)("span",{className:m().srOnly,children:"Switch tokens"})]}),(0,s.jsxs)("div",{className:m().tokenRow,children:[(0,s.jsxs)("div",{className:m().rowHeader,children:[(0,s.jsx)("span",{className:m().rowLabel,children:"You Receive"}),(0,s.jsxs)("span",{className:m().estimateTag,children:["≈ ",Y," ",_.label]})]}),(0,s.jsxs)("div",{className:m().tokenControls,children:[(0,s.jsxs)("div",{className:m().tokenSelectGroup,children:[(0,s.jsx)("label",{className:m().srOnly,htmlFor:"toMint",children:"Select token to receive"}),(0,s.jsx)("select",{id:"toMint",className:m().tokenSelect,value:_.mint,onChange:e=>{let t=h.find(t=>t.mint===e.target.value);t&&t.mint!==a.mint&&x(t)},children:h.map(e=>(0,s.jsx)("option",{value:e.mint,children:e.label},e.mint))}),(0,s.jsx)("span",{className:m().mintHint,children:p(_.mint)})]}),(0,s.jsxs)("div",{className:m().amountGroup,children:[(0,s.jsx)("label",{className:m().srOnly,htmlFor:"toAmount",children:"Estimated amount to receive"}),(0,s.jsx)("input",{id:"toAmount",className:m().tokenAmount,value:Y,readOnly:!0})]})]})]})]}),T&&(0,s.jsxs)("section",{className:m().quoteSummary,children:[(0,s.jsx)("h2",{children:"Quote Preview"}),(0,s.jsxs)("div",{className:m().summaryGrid,children:[(0,s.jsxs)("div",{className:m().summaryItem,children:[(0,s.jsx)("span",{className:m().summaryLabel,children:"Route"}),(0,s.jsx)("span",{className:m().summaryValue,children:J})]}),(0,s.jsxs)("div",{className:m().summaryItem,children:[(0,s.jsx)("span",{className:m().summaryLabel,children:"Price Impact"}),(0,s.jsx)("span",{className:m().summaryValue,children:z})]}),(0,s.jsxs)("div",{className:m().summaryItem,children:[(0,s.jsxs)("span",{className:m().summaryLabel,children:["1 ",a.label]}),(0,s.jsx)("span",{className:m().summaryValue,children:X})]}),(0,s.jsxs)("div",{className:m().summaryItem,children:[(0,s.jsx)("span",{className:m().summaryLabel,children:"Min Received"}),(0,s.jsx)("span",{className:m().summaryValue,children:$})]})]}),(0,s.jsx)("p",{className:m().summaryHelp,children:Q})]}),(0,s.jsx)("button",{className:m().swapButton,type:"button",onClick:()=>{if(!T)return void O(!0);el&&!f&&eo()},disabled:ed||H,children:ec}),v&&(0,s.jsx)("p",{className:m().swapFeedbackError,children:v}),B&&!v&&(0,s.jsxs)("p",{className:m().swapFeedback,children:["Swap sent:"," ",(0,s.jsx)("a",{href:"https://solscan.io/tx/".concat(B),target:"_blank",rel:"noreferrer",children:B})]})]})}},1857:(e,t,a)=>{Promise.resolve().then(a.t.bind(a,9e3,23)),Promise.resolve().then(a.bind(a,1458))},5541:e=>{e.exports={swapCard:"SwapCard_swapCard__ukxGw",header:"SwapCard_header__NtIJ1",badge:"SwapCard_badge__noiXK",swapMeta:"SwapCard_swapMeta___Ut5d",disconnectButton:"SwapCard_disconnectButton__sVKM_",tradeBox:"SwapCard_tradeBox__N4H2r",tokenRow:"SwapCard_tokenRow__sFyoa",rowHeader:"SwapCard_rowHeader__gE_Sr",rowLabel:"SwapCard_rowLabel__eZC9N",balanceGroup:"SwapCard_balanceGroup__KhyJa",balanceLabel:"SwapCard_balanceLabel__RxWY5",balanceShortcuts:"SwapCard_balanceShortcuts__9msPI",shortcutButton:"SwapCard_shortcutButton__4q5Sb",tokenControls:"SwapCard_tokenControls__zu5Iq",tokenSelectGroup:"SwapCard_tokenSelectGroup__xtfU6",tokenSelect:"SwapCard_tokenSelect__7C8lV",mintHint:"SwapCard_mintHint__WKDgW",amountGroup:"SwapCard_amountGroup__c9TAF",tokenAmount:"SwapCard_tokenAmount__jBkwI",switchButton:"SwapCard_switchButton__cGEf5",switchIcon:"SwapCard_switchIcon__s9p1Q",arrowUp:"SwapCard_arrowUp__6SfR6",arrowDown:"SwapCard_arrowDown__5WgT7",estimateTag:"SwapCard_estimateTag__iH4H8",quoteSummary:"SwapCard_quoteSummary__esmN_",summaryGrid:"SwapCard_summaryGrid__fx04H",summaryItem:"SwapCard_summaryItem__L46wn",summaryLabel:"SwapCard_summaryLabel__vfhwL",summaryValue:"SwapCard_summaryValue__PE3Dg",summaryHelp:"SwapCard_summaryHelp__FcJ46",swapButton:"SwapCard_swapButton__xXjrl",swapFeedback:"SwapCard_swapFeedback__zs77O",swapFeedbackError:"SwapCard_swapFeedbackError__X0RqA",srOnly:"SwapCard_srOnly__3NOe4"}},7781:()=>{},9e3:e=>{e.exports={main:"page_main__GlU4n",siteHeader:"page_siteHeader__0lNAY",tickerBar:"page_tickerBar__C8Qxx",tickerTrack:"page_tickerTrack__UJyjH","ticker-scroll":"page_ticker-scroll__Kqin8",tickerContent:"page_tickerContent__NU3GR",tickerItem:"page_tickerItem__YzgEN",tickerPositive:"page_tickerPositive__gkeDp",tickerNegative:"page_tickerNegative__LPyzp"}}},e=>{e.O(0,[532,36,507,113,577,358],()=>e(e.s=1857)),_N_E=e.O()}]);